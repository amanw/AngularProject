{"version":3,"file":"ngx-image-cropper.umd.min.js","sources":["~/ngx-image-cropper/src/image.utils.ts","~/ngx-image-cropper/src/image-cropper.component.ts","~/ngx-image-cropper/src/image-cropper.module.ts"],"sourcesContent":["\nexport class ImageUtils {\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nstatic getOrientation(imageBase64: string): number {\n        const /** @type {?} */ view = new DataView(this.base64ToArrayBuffer(imageBase64));\n        if (view.getUint16(0, false) != 0xFFD8) {\n            return -2;\n        }\n        const /** @type {?} */ length = view.byteLength;\n        let /** @type {?} */ offset = 2;\n        while (offset < length) {\n            if (view.getUint16(offset + 2, false) <= 8) return -1;\n            const /** @type {?} */ marker = view.getUint16(offset, false);\n            offset += 2;\n            if (marker == 0xFFE1) {\n                if (view.getUint32(offset += 2, false) != 0x45786966) {\n                    return -1;\n                }\n\n                const /** @type {?} */ little = view.getUint16(offset += 6, false) == 0x4949;\n                offset += view.getUint32(offset + 4, little);\n                const /** @type {?} */ tags = view.getUint16(offset, little);\n                offset += 2;\n                for (let /** @type {?} */ i = 0; i < tags; i++) {\n                    if (view.getUint16(offset + (i * 12), little) == 0x0112) {\n                        return view.getUint16(offset + (i * 12) + 8, little);\n                    }\n                }\n            }\n            else if ((marker & 0xFF00) != 0xFF00) {\n                break;\n            }\n            else {\n                offset += view.getUint16(offset, false);\n            }\n        }\n        return -1;\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nprivate static base64ToArrayBuffer(imageBase64: string) {\n        imageBase64 = imageBase64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n        const /** @type {?} */ binaryString = atob(imageBase64);\n        const /** @type {?} */ len = binaryString.length;\n        const /** @type {?} */ bytes = new Uint8Array(len);\n        for (let /** @type {?} */ i = 0; i < len; i++) {\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        return bytes.buffer;\n    }\n/**\n * @param {?} srcBase64\n * @param {?} srcOrientation\n * @param {?} callback\n * @return {?}\n */\nstatic resetOrientation(srcBase64: string, srcOrientation: number, callback: Function) {\n        const /** @type {?} */ img = new Image();\n        img.onload = function () {\n            const /** @type {?} */ width = img.width;\n            const /** @type {?} */ height = img.height;\n            const /** @type {?} */ canvas = document.createElement('canvas');\n            const /** @type {?} */ ctx = canvas.getContext('2d');\n\n            if (ctx) {\n                if (4 < srcOrientation && srcOrientation < 9) {\n                    canvas.width = height;\n                    canvas.height = width;\n                } else {\n                    canvas.width = width;\n                    canvas.height = height;\n                }\n                ImageUtils.transformCanvas(ctx, srcOrientation, width, height);\n                ctx.drawImage(img, 0, 0);\n                callback(canvas.toDataURL());\n            } else {\n                callback(srcBase64);\n            }\n        };\n        img.src = srcBase64;\n    }\n/**\n * @param {?} ctx\n * @param {?} orientation\n * @param {?} width\n * @param {?} height\n * @return {?}\n */\nprivate static transformCanvas(ctx: any, orientation: number, width: number, height: number) {\n        switch (orientation) {\n            case 2:\n                ctx.transform(-1, 0, 0, 1, width, 0);\n                break;\n            case 3:\n                ctx.transform(-1, 0, 0, -1, width, height);\n                break;\n            case 4:\n                ctx.transform(1, 0, 0, -1, 0, height);\n                break;\n            case 5:\n                ctx.transform(0, 1, 1, 0, 0, 0);\n                break;\n            case 6:\n                ctx.transform(0, 1, -1, 0, height, 0);\n                break;\n            case 7:\n                ctx.transform(0, -1, -1, 0, height, width);\n                break;\n            case 8:\n                ctx.transform(0, -1, 1, 0, 0, width);\n                break;\n            default:\n                break;\n        }\n    }\n}\n","import {\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostListener,\n    Input,\n    OnChanges,\n    Output,\n    SimpleChanges,\n    ChangeDetectorRef,\n    ChangeDetectionStrategy\n} from '@angular/core';\nimport { DomSanitizer, SafeUrl, SafeStyle } from '@angular/platform-browser';\nimport { ImageUtils } from './image.utils';\n\ninterface MoveStart {\n    active: boolean;\n    type: string | null;\n    position: string | null;\n    x1: number;\n    y1: number;\n    x2: number;\n    y2: number;\n    clientX: number;\n    clientY: number;\n}\n\ninterface Dimensions {\n    width: number;\n    height: number;\n}\n\nexport interface CropperPosition {\n    x1: number;\n    y1: number;\n    x2: number;\n    y2: number;\n}\nexport class ImageCropperComponent implements OnChanges {\nprivate originalImage: any;\nprivate moveStart: MoveStart;\nprivate maxSize: Dimensions;\nprivate originalSize: Dimensions;\n\n    safeImgDataUrl: SafeUrl | string;\n    marginLeft: SafeStyle | string = '0px';\n    imageVisible = false;\n/**\n * @param {?} file\n * @return {?}\n */\nset imageFileChanged(file: File) {\n        this.initCropper();\n        if (file) {\n            this.loadImageFile(file);\n        }\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nset imageChangedEvent(event: any) {\n        this.initCropper();\n        if (event && event.target && event.target.files && event.target.files.length > 0) {\n            this.loadImageFile(event.target.files[0]);\n        }\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nset imageBase64(imageBase64: string) {\n        this.initCropper();\n        this.loadBase64Image(imageBase64);\n    }\n\n     format: 'png' | 'jpeg' | 'bmp' | 'webp' | 'ico' = 'png';\n     maintainAspectRatio = true;\n     aspectRatio = 1;\n     resizeToWidth = 0;\n     onlyScaleDown = false;\n     imageQuality = 92;\n     cropper: CropperPosition = {\n        x1: -100,\n        y1: -100,\n        x2: 10000,\n        y2: 10000\n    };\n\n     imageCroppedBase64 = new EventEmitter<string>();\n     imageCroppedFile = new EventEmitter<File>();\n     imageLoaded = new EventEmitter<void>();\n     loadImageFailed = new EventEmitter<void>();\n/**\n * @param {?} elementRef\n * @param {?} sanitizer\n * @param {?} cd\n */\nconstructor(private elementRef: ElementRef,\nprivate sanitizer: DomSanitizer,\nprivate cd: ChangeDetectorRef) {\n        this.initCropper();\n    }\n/**\n * @param {?} changes\n * @return {?}\n */\nngOnChanges(changes: SimpleChanges): void {\n        if (changes['cropper']) {\n            setTimeout(() => {\n                this.setMaxSize();\n                this.checkCropperPosition(false);\n                this.crop();\n                this.cd.markForCheck();\n            });\n        }\n    }\n/**\n * @return {?}\n */\nprivate initCropper() {\n        this.imageVisible = false;\n        this.originalImage = null;\n        this.safeImgDataUrl = 'data:image/png;base64,iVBORw0KGg'\n            + 'oAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAU'\n            + 'AAarVyFEAAAAASUVORK5CYII=';\n        this.moveStart = {\n            active: false,\n            type: null,\n            position: null,\n            x1: 0,\n            y1: 0,\n            x2: 0,\n            y2: 0,\n            clientX: 0,\n            clientY: 0\n        };\n        this.maxSize = {\n            width: 0,\n            height: 0\n        };\n        this.originalSize = {\n            width: 0,\n            height: 0\n        };\n        this.cropper.x1 = -100;\n        this.cropper.y1 = -100;\n        this.cropper.x2 = 10000;\n        this.cropper.y2 = 10000;\n    }\n/**\n * @param {?} file\n * @return {?}\n */\nprivate loadImageFile(file: File) {\n        const /** @type {?} */ fileReader = new FileReader();\n        fileReader.onload = (event: any) => {\n            const /** @type {?} */ imageType = file.type;\n            if (this.isValidImageType(imageType)) {\n                this.checkExifRotationAndLoadImage(event.target.result);\n            } else {\n                this.loadImageFailed.emit();\n            }\n        };\n        fileReader.readAsDataURL(file);\n    }\n/**\n * @param {?} type\n * @return {?}\n */\nprivate isValidImageType(type: string) {\n        return type === 'image/jpeg'\n            || type === 'image/jpg'\n            || type === 'image/png'\n            || type === 'image/gif'\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nprivate checkExifRotationAndLoadImage(imageBase64: string) {\n        const /** @type {?} */ exifRotation = ImageUtils.getOrientation(imageBase64);\n        if (exifRotation > 1) {\n            ImageUtils.resetOrientation(\n                imageBase64,\n                exifRotation,\n                (rotatedBase64: string) => this.loadBase64Image(rotatedBase64)\n            );\n        } else {\n            this.loadBase64Image(imageBase64);\n        }\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nprivate loadBase64Image(imageBase64: string) {\n        this.originalImage = new Image();\n        this.originalImage.onload = () => {\n            this.originalSize.width = this.originalImage.width;\n            this.originalSize.height = this.originalImage.height;\n            this.cd.markForCheck();\n        };\n        this.safeImgDataUrl = this.sanitizer.bypassSecurityTrustResourceUrl(imageBase64);\n        this.originalImage.src = imageBase64;\n    }\n/**\n * @return {?}\n */\nimageLoadedInView(): void {\n        if (this.originalImage != null) {\n            this.imageLoaded.emit();\n            setTimeout(() => {\n                this.setMaxSize();\n                this.resetCropperPosition();\n                this.cd.markForCheck();\n            });\n        }\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nonResize(event: Event) {\n        this.resizeCropperPosition();\n        this.setMaxSize();\n    }\n/**\n * @return {?}\n */\nprivate resizeCropperPosition() {\n        const /** @type {?} */ displayedImage = this.elementRef.nativeElement.querySelector('.source-image');\n        if (this.maxSize.width !== displayedImage.offsetWidth || this.maxSize.height !== displayedImage.offsetHeight) {\n            this.cropper.x1 = this.cropper.x1 * displayedImage.offsetWidth / this.maxSize.width;\n            this.cropper.x2 = this.cropper.x2 * displayedImage.offsetWidth / this.maxSize.width;\n            this.cropper.y1 = this.cropper.y1 * displayedImage.offsetHeight / this.maxSize.height;\n            this.cropper.y2 = this.cropper.y2 * displayedImage.offsetHeight / this.maxSize.height;\n        }\n    }\n/**\n * @return {?}\n */\nprivate resetCropperPosition() {\n        const /** @type {?} */ displayedImage = this.elementRef.nativeElement.querySelector('.source-image');\n        if (displayedImage.offsetWidth / this.aspectRatio < displayedImage.offsetHeight) {\n            this.cropper.x1 = 0;\n            this.cropper.x2 = displayedImage.offsetWidth;\n            const /** @type {?} */ cropperHeight = displayedImage.offsetWidth / this.aspectRatio;\n            this.cropper.y1 = (displayedImage.offsetHeight - cropperHeight) / 2;\n            this.cropper.y2 = this.cropper.y1 + cropperHeight;\n        } else {\n            this.cropper.y1 = 0;\n            this.cropper.y2 = displayedImage.offsetHeight;\n            const /** @type {?} */ cropperWidth = displayedImage.offsetHeight * this.aspectRatio;\n            this.cropper.x1 = (displayedImage.offsetWidth - cropperWidth) / 2;\n            this.cropper.x2 = this.cropper.x1 + cropperWidth;\n        }\n        this.crop();\n        this.imageVisible = true;\n    }\n/**\n * @param {?} event\n * @param {?} moveType\n * @param {?=} position\n * @return {?}\n */\nstartMove(event: any, moveType: string, position: string | null = null) {\n        this.moveStart.active = true;\n        this.moveStart.type = moveType;\n        this.moveStart.position = position;\n        this.moveStart.clientX = this.getClientX(event);\n        this.moveStart.clientY = this.getClientY(event);\n        Object.assign(this.moveStart, this.cropper);\n        this.cd.markForCheck();\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nmoveImg(event: any) {\n        if (this.moveStart.active) {\n            event.stopPropagation();\n            event.preventDefault();\n            this.setMaxSize();\n            if (this.moveStart.type === 'move') {\n                this.move(event);\n                this.checkCropperPosition(true);\n            } else if (this.moveStart.type === 'resize') {\n                this.resize(event);\n                this.checkCropperPosition(false);\n            }\n            this.cd.markForCheck();\n        }\n    }\n/**\n * @return {?}\n */\nprivate setMaxSize() {\n        const /** @type {?} */ el = this.elementRef.nativeElement.querySelector('.source-image');\n        this.maxSize.width = el.offsetWidth;\n        this.maxSize.height = el.offsetHeight;\n        this.marginLeft = this.sanitizer.bypassSecurityTrustStyle('calc(50% - ' + this.maxSize.width / 2 + 'px)');\n    }\n/**\n * @param {?=} maintainSize\n * @return {?}\n */\nprivate checkCropperPosition(maintainSize = false) {\n        if (this.cropper.x1 < 0) {\n            this.cropper.x2 -= maintainSize ? this.cropper.x1 : 0;\n            this.cropper.x1 = 0;\n        }\n        if (this.cropper.y1 < 0) {\n            this.cropper.y2 -= maintainSize ? this.cropper.y1 : 0;\n            this.cropper.y1 = 0;\n        }\n        if (this.cropper.x2 > this.maxSize.width) {\n            this.cropper.x1 -= maintainSize ? (this.cropper.x2 - this.maxSize.width) : 0;\n            this.cropper.x2 = this.maxSize.width;\n        }\n        if (this.cropper.y2 > this.maxSize.height) {\n            this.cropper.y1 -= maintainSize ? (this.cropper.y2 - this.maxSize.height) : 0;\n            this.cropper.y2 = this.maxSize.height;\n        }\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nmoveStop(event: any) {\n        if (this.moveStart.active) {\n            this.moveStart.active = false;\n            this.crop();\n            this.cd.markForCheck();\n        }\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate move(event: any) {\n        const /** @type {?} */ diffX = this.getClientX(event) - this.moveStart.clientX;\n        const /** @type {?} */ diffY = this.getClientY(event) - this.moveStart.clientY;\n\n        this.cropper.x1 = this.moveStart.x1 + diffX;\n        this.cropper.y1 = this.moveStart.y1 + diffY;\n        this.cropper.x2 = this.moveStart.x2 + diffX;\n        this.cropper.y2 = this.moveStart.y2 + diffY;\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate resize(event: any) {\n        const /** @type {?} */ diffX = this.getClientX(event) - this.moveStart.clientX;\n        const /** @type {?} */ diffY = this.getClientY(event) - this.moveStart.clientY;\n        switch (this.moveStart.position) {\n            case 'left':\n                this.cropper.x1 = Math.min(this.moveStart.x1 + diffX, this.cropper.x2 - 20);\n                break;\n            case 'topleft':\n                this.cropper.x1 = Math.min(this.moveStart.x1 + diffX, this.cropper.x2 - 20);\n                this.cropper.y1 = Math.min(this.moveStart.y1 + diffY, this.cropper.y2 - 20);\n                break;\n            case 'top':\n                this.cropper.y1 = Math.min(this.moveStart.y1 + diffY, this.cropper.y2 - 20);\n                break;\n            case 'topright':\n                this.cropper.x2 = Math.max(this.moveStart.x2 + diffX, this.cropper.x1 + 20);\n                this.cropper.y1 = Math.min(this.moveStart.y1 + diffY, this.cropper.y2 - 20);\n                break;\n            case 'right':\n                this.cropper.x2 = Math.max(this.moveStart.x2 + diffX, this.cropper.x1 + 20);\n                break;\n            case 'bottomright':\n                this.cropper.x2 = Math.max(this.moveStart.x2 + diffX, this.cropper.x1 + 20);\n                this.cropper.y2 = Math.max(this.moveStart.y2 + diffY, this.cropper.y1 + 20);\n                break;\n            case 'bottom':\n                this.cropper.y2 = Math.max(this.moveStart.y2 + diffY, this.cropper.y1 + 20);\n                break;\n            case 'bottomleft':\n                this.cropper.x1 = Math.min(this.moveStart.x1 + diffX, this.cropper.x2 - 20);\n                this.cropper.y2 = Math.max(this.moveStart.y2 + diffY, this.cropper.y1 + 20);\n                break;\n        }\n\n        if (this.maintainAspectRatio) {\n            this.checkAspectRatio();\n        }\n    }\n/**\n * @return {?}\n */\nprivate checkAspectRatio() {\n        let /** @type {?} */ overflowX = 0;\n        let /** @type {?} */ overflowY = 0;\n\n        switch (this.moveStart.position) {\n            case 'top':\n                this.cropper.x2 = this.cropper.x1 + (this.cropper.y2 - this.cropper.y1) * this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(0 - this.cropper.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y1 += (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'bottom':\n                this.cropper.x2 = this.cropper.x1 + (this.cropper.y2 - this.cropper.y1) * this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(this.cropper.y2 - this.maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y2 -= (overflowY * this.aspectRatio) > overflowX ? overflowY : (overflowX / this.aspectRatio);\n                }\n                break;\n            case 'topleft':\n                this.cropper.y1 = this.cropper.y2 - (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(0 - this.cropper.x1, 0);\n                overflowY = Math.max(0 - this.cropper.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x1 += (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y1 += (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'topright':\n                this.cropper.y1 = this.cropper.y2 - (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(0 - this.cropper.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y1 += (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'right':\n            case 'bottomright':\n                this.cropper.y2 = this.cropper.y1 + (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(this.cropper.y2 - this.maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y2 -= (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'left':\n            case 'bottomleft':\n                this.cropper.y2 = this.cropper.y1 + (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(0 - this.cropper.x1, 0);\n                overflowY = Math.max(this.cropper.y2 - this.maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x1 += (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y2 -= (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n        }\n    }\n/**\n * @return {?}\n */\nprivate crop() {\n        const /** @type {?} */ displayedImage = this.elementRef.nativeElement.querySelector('.source-image');\n        if (displayedImage && this.originalImage != null) {\n            const /** @type {?} */ ratio = this.originalSize.width / displayedImage.offsetWidth;\n            const /** @type {?} */ left = Math.round(this.cropper.x1 * ratio);\n            const /** @type {?} */ top = Math.round(this.cropper.y1 * ratio);\n            const /** @type {?} */ width = Math.round((this.cropper.x2 - this.cropper.x1) * ratio);\n            const /** @type {?} */ height = Math.round((this.cropper.y2 - this.cropper.y1) * ratio);\n            const /** @type {?} */ resizeRatio = this.getResizeRatio(width);\n\n            const /** @type {?} */ cropCanvas = /** @type {?} */(( document.createElement('canvas') as HTMLCanvasElement));\n            cropCanvas.width = width * resizeRatio;\n            cropCanvas.height = height * resizeRatio;\n\n            const /** @type {?} */ ctx = cropCanvas.getContext('2d');\n            if (ctx) {\n                ctx.drawImage(this.originalImage, left, top, width, height, 0, 0, width * resizeRatio, height * resizeRatio);\n                const /** @type {?} */ quality = Math.min(1, Math.max(0, this.imageQuality / 100));\n                const /** @type {?} */ croppedImage = cropCanvas.toDataURL(`image/${this.format}`, quality);\n                if (croppedImage.length > 10) {\n                    this.imageCroppedBase64.emit(croppedImage);\n                }\n                cropCanvas.toBlob(\n                    (fileImage: File) => this.imageCroppedFile.emit(fileImage),\n                    `image/${this.format}`,\n                    quality,\n                );\n            }\n        }\n    }\n/**\n * @param {?} width\n * @return {?}\n */\nprivate getResizeRatio(width: number): number {\n        return this.resizeToWidth > 0 && (!this.onlyScaleDown || width > this.resizeToWidth)\n            ? this.resizeToWidth / width\n            : 1;\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate getClientX(event: any) {\n        return event.clientX != null ? event.clientX : event.touches[0].clientX;\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate getClientY(event: any) {\n        return event.clientY != null ? event.clientY : event.touches[0].clientY;\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n    selector: 'image-cropper',\n    template: `\n      <div>\n          <img\n              [src]=\"safeImgDataUrl\"\n              [style.visibility]=\"imageVisible ? 'visible' : 'hidden'\"\n              (load)=\"imageLoadedInView()\"\n              class=\"source-image\"\n          />\n          <div class=\"cropper\"\n               [style.top.px]=\"cropper.y1\"\n               [style.left.px]=\"cropper.x1\"\n               [style.width.px]=\"cropper.x2 - cropper.x1\"\n               [style.height.px]=\"cropper.y2 - cropper.y1\"\n               [style.margin-left]=\"marginLeft\"\n               [style.visibility]=\"imageVisible ? 'visible' : 'hidden'\"\n          >\n              <div\n                  (mousedown)=\"startMove($event, 'move')\"\n                  (touchstart)=\"startMove($event, 'move')\"\n                  class=\"move\"\n              >&nbsp;</div>\n              <span\n                  class=\"resize topleft\"\n                  (mousedown)=\"startMove($event, 'resize', 'topleft')\"\n                  (touchstart)=\"startMove($event, 'resize', 'topleft')\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize top\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize topright\"\n                  (mousedown)=\"startMove($event, 'resize', 'topright')\"\n                  (touchstart)=\"startMove($event, 'resize', 'topright')\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize right\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize bottomright\"\n                  (mousedown)=\"startMove($event, 'resize', 'bottomright')\"\n                  (touchstart)=\"startMove($event, 'resize', 'bottomright')\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize bottom\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize bottomleft\"\n                  (mousedown)=\"startMove($event, 'resize', 'bottomleft')\"\n                  (touchstart)=\"startMove($event, 'resize', 'bottomleft')\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize left\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize-bar top\"\n                  (mousedown)=\"startMove($event, 'resize', 'top')\"\n                  (touchstart)=\"startMove($event, 'resize', 'top')\"\n              ></span>\n              <span\n                  class=\"resize-bar right\"\n                  (mousedown)=\"startMove($event, 'resize', 'right')\"\n                  (touchstart)=\"startMove($event, 'resize', 'right')\"\n              ></span>\n              <span\n                  class=\"resize-bar bottom\"\n                  (mousedown)=\"startMove($event, 'resize', 'bottom')\"\n                  (touchstart)=\"startMove($event, 'resize', 'bottom')\"\n              ></span>\n              <span\n                  class=\"resize-bar left\"\n                  (mousedown)=\"startMove($event, 'resize', 'left')\"\n                  (touchstart)=\"startMove($event, 'resize', 'left')\"\n              ></span>\n          </div>\n      </div>\n    `,\n    styles: [`\n      :host {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        position: relative;\n        width: 100%;\n        max-width: 100%;\n        max-height: 100%;\n        overflow: hidden;\n        padding: 5px;\n        text-align: center;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none; }\n        :host > div {\n          position: relative;\n          width: 100%; }\n          :host > div .source-image {\n            max-width: 100%;\n            max-height: 100%; }\n        :host .cropper {\n          position: absolute;\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          color: #53535C !important;\n          background: transparent !important;\n          outline-color: rgba(255, 255, 255, 0.3);\n          outline-width: 1000px;\n          outline-style: solid;\n          -ms-touch-action: none;\n              touch-action: none; }\n          :host .cropper:after {\n            position: absolute;\n            content: '';\n            top: 0;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            pointer-events: none;\n            border: dashed 1px;\n            opacity: .75;\n            color: inherit;\n            z-index: 1; }\n          :host .cropper .move {\n            width: 100%;\n            cursor: move;\n            border: 1px solid rgba(255, 255, 255, 0.5); }\n          :host .cropper .resize {\n            position: absolute;\n            display: inline-block;\n            line-height: 6px;\n            padding: 8px;\n            opacity: .85;\n            z-index: 1; }\n            :host .cropper .resize .square {\n              display: inline-block;\n              background: #53535C !important;\n              width: 6px;\n              height: 6px;\n              border: 1px solid rgba(255, 255, 255, 0.5); }\n            :host .cropper .resize.topleft {\n              top: -12px;\n              left: -12px;\n              cursor: nw-resize; }\n            :host .cropper .resize.top {\n              top: -12px;\n              left: calc(50% - 12px);\n              cursor: n-resize; }\n            :host .cropper .resize.topright {\n              top: -12px;\n              right: -12px;\n              cursor: ne-resize; }\n            :host .cropper .resize.right {\n              top: calc(50% - 12px);\n              right: -12px;\n              cursor: e-resize; }\n            :host .cropper .resize.bottomright {\n              bottom: -12px;\n              right: -12px;\n              cursor: se-resize; }\n            :host .cropper .resize.bottom {\n              bottom: -12px;\n              left: calc(50% - 12px);\n              cursor: s-resize; }\n            :host .cropper .resize.bottomleft {\n              bottom: -12px;\n              left: -12px;\n              cursor: sw-resize; }\n            :host .cropper .resize.left {\n              top: calc(50% - 12px);\n              left: -12px;\n              cursor: w-resize; }\n          :host .cropper .resize-bar {\n            position: absolute;\n            z-index: 1; }\n            :host .cropper .resize-bar.top {\n              top: -11px;\n              left: 11px;\n              width: calc(100% - 22px);\n              height: 22px;\n              cursor: n-resize; }\n            :host .cropper .resize-bar.right {\n              top: 11px;\n              right: -11px;\n              height: calc(100% - 22px);\n              width: 22px;\n              cursor: e-resize; }\n            :host .cropper .resize-bar.bottom {\n              bottom: -11px;\n              left: 11px;\n              width: calc(100% - 22px);\n              height: 22px;\n              cursor: s-resize; }\n            :host .cropper .resize-bar.left {\n              top: 11px;\n              left: -11px;\n              height: calc(100% - 22px);\n              width: 22px;\n              cursor: w-resize; }\n    `],\n    changeDetection: ChangeDetectionStrategy.OnPush\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: DomSanitizer, },\n{type: ChangeDetectorRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'imageFileChanged': [{ type: Input },],\n'imageChangedEvent': [{ type: Input },],\n'imageBase64': [{ type: Input },],\n'format': [{ type: Input },],\n'maintainAspectRatio': [{ type: Input },],\n'aspectRatio': [{ type: Input },],\n'resizeToWidth': [{ type: Input },],\n'onlyScaleDown': [{ type: Input },],\n'imageQuality': [{ type: Input },],\n'cropper': [{ type: Input },],\n'imageCroppedBase64': [{ type: Output },],\n'imageCroppedFile': [{ type: Output },],\n'imageLoaded': [{ type: Output },],\n'loadImageFailed': [{ type: Output },],\n'onResize': [{ type: HostListener, args: ['window:resize', ['$event'], ] },],\n'moveImg': [{ type: HostListener, args: ['document:mousemove', ['$event'], ] },{ type: HostListener, args: ['document:touchmove', ['$event'], ] },],\n'moveStop': [{ type: HostListener, args: ['document:mouseup', ['$event'], ] },{ type: HostListener, args: ['document:touchend', ['$event'], ] },],\n};\n}\n\nfunction ImageCropperComponent_tsickle_Closure_declarations() {\n/** @type {?} */\nImageCropperComponent.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nImageCropperComponent.ctorParameters;\n/** @type {?} */\nImageCropperComponent.propDecorators;\n/** @type {?} */\nImageCropperComponent.prototype.originalImage;\n/** @type {?} */\nImageCropperComponent.prototype.moveStart;\n/** @type {?} */\nImageCropperComponent.prototype.maxSize;\n/** @type {?} */\nImageCropperComponent.prototype.originalSize;\n/** @type {?} */\nImageCropperComponent.prototype.safeImgDataUrl;\n/** @type {?} */\nImageCropperComponent.prototype.marginLeft;\n/** @type {?} */\nImageCropperComponent.prototype.imageVisible;\n/** @type {?} */\nImageCropperComponent.prototype.format;\n/** @type {?} */\nImageCropperComponent.prototype.maintainAspectRatio;\n/** @type {?} */\nImageCropperComponent.prototype.aspectRatio;\n/** @type {?} */\nImageCropperComponent.prototype.resizeToWidth;\n/** @type {?} */\nImageCropperComponent.prototype.onlyScaleDown;\n/** @type {?} */\nImageCropperComponent.prototype.imageQuality;\n/** @type {?} */\nImageCropperComponent.prototype.cropper;\n/** @type {?} */\nImageCropperComponent.prototype.imageCroppedBase64;\n/** @type {?} */\nImageCropperComponent.prototype.imageCroppedFile;\n/** @type {?} */\nImageCropperComponent.prototype.imageLoaded;\n/** @type {?} */\nImageCropperComponent.prototype.loadImageFailed;\n/** @type {?} */\nImageCropperComponent.prototype.elementRef;\n/** @type {?} */\nImageCropperComponent.prototype.sanitizer;\n/** @type {?} */\nImageCropperComponent.prototype.cd;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ImageCropperComponent } from './image-cropper.component';\nexport class ImageCropperModule {static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n    imports: [\n        CommonModule\n    ],\n    declarations: [\n        ImageCropperComponent\n    ],\n    exports: [\n        ImageCropperComponent\n    ]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction ImageCropperModule_tsickle_Closure_declarations() {\n/** @type {?} */\nImageCropperModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nImageCropperModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["ImageUtils","getOrientation","imageBase64","view","DataView","this","base64ToArrayBuffer","getUint16","length","byteLength","offset","marker","getUint32","little","tags","i","replace","binaryString","atob","len","bytes","Uint8Array","charCodeAt","buffer","resetOrientation","srcBase64","srcOrientation","callback","img","Image","onload","width","height","canvas","document","createElement","ctx","getContext","transformCanvas","drawImage","toDataURL","src","orientation","transform","ImageCropperComponent","elementRef","sanitizer","cd","marginLeft","imageVisible","format","maintainAspectRatio","aspectRatio","resizeToWidth","onlyScaleDown","imageQuality","cropper","x1","y1","x2","y2","imageCroppedBase64","EventEmitter","imageCroppedFile","imageLoaded","loadImageFailed","initCropper","Object","defineProperty","prototype","set","file","loadImageFile","event","target","files","loadBase64Image","ngOnChanges","changes","_this","setTimeout","setMaxSize","checkCropperPosition","crop","markForCheck","originalImage","safeImgDataUrl","moveStart","active","type","position","clientX","clientY","maxSize","originalSize","fileReader","FileReader","imageType","isValidImageType","checkExifRotationAndLoadImage","result","emit","readAsDataURL","exifRotation","rotatedBase64","bypassSecurityTrustResourceUrl","imageLoadedInView","resetCropperPosition","onResize","resizeCropperPosition","displayedImage","nativeElement","querySelector","offsetWidth","offsetHeight","cropperHeight","cropperWidth","startMove","moveType","getClientX","getClientY","assign","moveImg","stopPropagation","preventDefault","move","resize","el","bypassSecurityTrustStyle","maintainSize","moveStop","diffX","diffY","Math","min","max","checkAspectRatio","overflowX","overflowY","ratio","left","round","top","resizeRatio","getResizeRatio","cropCanvas","quality","croppedImage","toBlob","fileImage","touches","decorators","Component","args","selector","template","styles","changeDetection","ChangeDetectionStrategy","OnPush","ctorParameters","ElementRef","DomSanitizer","ChangeDetectorRef","propDecorators","imageFileChanged","Input","imageChangedEvent","Output","HostListener","ImageCropperModule","NgModule","imports","CommonModule","declarations","exports"],"mappings":"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"}
